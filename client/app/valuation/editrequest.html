<div id="wrapper">
  <div id="page-wrapper">
    <div class="container-fluid">
      <div class="row">
        <div class="col-sm-6">
          <h3>
            <a href="/valuationrequests" class="btn btn-primary">Back</a>
          </h3>
        </div>            
      </div>
      <hr>
      <form class="" name="form" novalidate>
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Edit Valuation Request</h3>
          </div>
          <div class="panel-body">
            <div class="row form-group">
                <div class="col-sm-6">
                    <div class="">
                        <label>Request Type:</label>
                    </div>
                    <div class="row">
                        <div class="col-xs-6 col-sm-6">
                            <div class="radio radio-info">
                                <input type="radio" id="requestValuation" ng-model="valuationReq.requestType" name="requestType" value="Valuation" ng-change="getVendors('Valuation')">
                                <label for="requestValuation"> Valuation </label>
                            </div>
                        </div>
                        <div class="col-xs-6 col-sm-6">
                            <div class="radio radio-info">
                                <input type="radio" id="requestInspection" ng-model="valuationReq.requestType" name="requestType" value="Inspection" ng-click="getVendors('Inspection')">
                                <label for="requestInspection"> Inspection </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-xs-12 col-sm-3">
                    <div class=" form-group" ng-class="{'has-error': form.proCategory.$invalid && submitted}">
                        <label>Category*</label>
                        <select class="form-control" name="proCategory" ng-model="valuationReq.product.category" ng-change="onCategoryChange(valuationReq.product.category)" required>
                            <option value="">Select Category</option>
                            <option value="{{cat.name}}" ng-repeat="cat in allCategory| orderBy:'name'">{{cat.name}}</option>
                        </select>

                    </div>
                </div>
                <div class="col-xs-12 col-sm-3">
                    <div class="form-group " ng-class="{'has-error': form.proBrand.$invalid && submitted}">
                        <label>Brand*</label>
                        <select class="form-control" name="proBrand" ng-model="valuationReq.product.brand" ng-change="onBrandChange(valuationReq.product.brand)" required>
                            <option value="">Select Brand</option>
                            <option value="{{br.name}}" ng-repeat="br in brandList| orderBy:'name'">{{br.name}}</option>
                        </select>

                    </div>
                </div>
                <div class="col-xs-12 col-sm-3">
                    <div class="form-group " ng-class="{'has-error': form.proModel.$invalid && submitted}">
                        <label>Model*</label>
                        <select class="form-control" name="proModel" ng-model="valuationReq.product.model" required>
                            <option value="">Select Model</option>
                            <option value="{{md.name}}" ng-repeat="md in modelList| orderBy:'name'">{{md.name}}</option>
                        </select>

                    </div>
                </div>
                <div class="col-xs-12 col-sm-3">
                    <div class="form-group " ng-class="{'has-error': form.prdMfg.$invalid && submitted}">
                        <label>Manufacturing Year*</label>
                        <input type="number" name="prdMfg" class="form-control" placeholder="Enter Manufacturing Year" ng-model="valuationReq.product.mfgYear" ng-minlength="4" ng-maxlength="4" min="1900" max="currentYear" string-to-number required>
                    </div>
                </div>
                <div class="col-xs-12 col-sm-3">
                    <div class="form-group ">
                        <label>Asset Description</label>
                        <input type="text" name="prddescription" class="form-control" placeholder="Enter Asset Description" ng-model="valuationReq.product.description">
                    </div>
                </div>
                <div class="col-xs-12 col-sm-3">
                    <div class="form-group " ng-class="{'has-error': form.prdCountry.$invalid && submitted }">
                        <label>Country*</label>
                        <select class="form-control" ng-model="valuationReq.product.country" name="prdCountry" ng-change="onPrdCountryChange(valuationReq.product.country)" required>
                            <option value="">Select Country</option>
                            <option ng-repeat="country in allCountries| orderBy:'name'" value="{{country.name}}">{{country.name}}</option>
                        </select>

                    </div>
                </div>
                <div class="col-xs-12 col-sm-3">
                    <div class=" form-group" ng-class="{'has-error': form.prdState.$invalid && submitted }">
                        <label>State*</label>
                        <select class="form-control" name="prdState" ng-model="valuationReq.product.state" ng-change="onPrdStateChange(valuationReq.product.state)" required>
                            <option value="">Select State</option>
                            <option ng-repeat="state in prdStateList| orderBy:'name'" value="{{state.name}}">{{state.name}}</option>
                        </select>
                    </div>

                </div>
                <div class="col-xs-12 col-sm-3">
                    <div class="form-group " ng-class="{'has-error': form.prdLocation.$invalid && submitted }">
                        <label>Location*</label>
                        <select class="form-control" name="prdLocation"  ng-model="valuationReq.product.city" required>
                            <option value="">Select Location</option>
                            <option ng-repeat="location in prdLocationList| orderBy:'name'" value="{{location.name}}">{{location.name}}</option>
                        </select>
                    </div>
                </div>

                <div class="col-xs-12 col-sm-3">
                    <div class="form-group " ng-class="{'has-error': form.contactPerson.$invalid && submitted }">
                        <label>Contact Person*</label>
                        <input type="text" name="contactPerson" class="form-control" placeholder="Contact Person"  ng-model="valuationReq.contactPerson" required>
                    </div>
                </div>
                <div class="col-xs-12 col-sm-3">
                    <div class="form-group " ng-class="{'has-error': form.contactNumber.$invalid && submitted }">
                        <label>Contact Number*</label>
                        <input type="text" name="contactNumber" class="form-control" ng-model="valuationReq.contactNumber" placeholder="Contact Number" required>
                    </div>
                </div>
                <div class="col-xs-12 col-sm-3">
                    <div class="form-group ">
                        <label>Partner</label>
                        <select class="form-control" ng-model="valuationReq.valuationAgency._id">
                            <option value="">Select Partner</option>
                            <option ng-repeat="vendor in vendorList" value="{{vendor._id}}">{{vendor.name}}</option>
                        </select>
                    </div>
                </div>
                <div class="col-xs-6 col-sm-3">
                    <div class=" form-group" ng-class="{'has-error': form.purpose.$invalid && submitted }">
                        <label>Purpose of valuation</label>
                        <select class="form-control" ng-model="valuationReq.purpose" name="purpose" required>
                            <!-- <option value="Financing">Financing</option> -->
                            <option ng-repeat="valuation in valuationList| orderBy:'name'" value="{{valuation.name}}">{{valuation.name}}</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="row">   
                <div class="col-xs-6 col-sm-3" ng-class="{'has-error': form.otherName.$invalid && submitted }">
                    <div class=" form-group">
                        <label>Other*</label>
                        <input class="form-control" type="text" name="otherName" ng-model="valuationReq.otherName" ng-disabled ="valuationReq.purpose != 'Other'" placeholder="Other" ng-required= "valuationReq.purpose == 'Other'">
                    </div>
                </div>
                <div class="col-xs-12 col-sm-3">
                    <div class="">
                        <label>Schedule a call</label>
                    </div>
                    <div class="col-xs-6 col-sm-6 form-group">
                        <div class="radio radio-info">
                            <input type="radio" id="inlineRadio1" name="schedule" ng-model="valuationReq.schedule" value="yes">
                            <label for="inlineRadio1"> Yes </label>
                        </div>
                    </div>
                    <div class="col-xs-6 col-sm-6 form-group">
                        <div class="radio radio-info">
                            <input type="radio" id="inlineRadio2" name="schedule" ng-model="valuationReq.schedule" value="no">
                            <label for="inlineRadio2"> No </label>
                        </div>
                    </div>
                </div>
                <div class="col-xs-6 col-sm-3 form-group" ng-if="valuationReq.schedule == 'yes'" >

                    <label>Pick Date</label>
                    <div class="input-group " ng-class="{'has-error': form.scheduleDate.$invalid && submitted }">
                        <input type="text" class="form-control" ng-model="valuationReq.scheduleDate" uib-datepicker-popup="{{format}}" name="scheduleDate" ng-value="" is-open="popup1.opened" min-date="minDate" max-date="maxDate" datepicker-options="datepickerOptions" date-disabled="disabled(date, mode)" ng-required="valuationReq.schedule == 'yes'" close-text="Close" alt-input-formats="altInputFormats" placeholder="dd/mm/yyyy" />
                        <span class="input-group-addon">
                            <a href ng-click="open1()"><i class="fa fa-calendar-o"></i></a>
                        </span>
                    </div>
                </div>

                <div class="col-xs-6 col-sm-3 form-group " ng-if="valuationReq.schedule == 'yes'">

                    <label>Set Time</label>
                    <div class="input-group ">
                        <input type="text" class="form-control" name="otherName" placeholder="HH:MM" ng-model="valuationReq.scheduledTime" is-open=""  ng-value="{{valuationReq.scheduledTime| date:'shortTime' }}" timepicker-options="timepickerOptions">
                        <span class="input-group-addon">
                            <a href ng-click="toggleMode()"><i class="fa fa-clock-o"></i></a>
                        </span>
                    </div>
                    <uib-timepicker ng-if="isShow" ng-model="mytime" ng-change="changed(mytime)" hour-step="hstep" minute-step="mstep" show-meridian="ismeridian"></uib-timepicker>
                </div>
            </div>
           
            <div class="form-group ">
                <label>Comment</label>
                <input type="text" class="form-control" name="comment" ng-model="valuationReq.comment" placeholder="Write Comments (if any)">
            </div>      

            <div class="text-right form-group">
                <button type="button" class="btn btn-primary" ng-disabled="isAdmin()" ng-click="addValuationQuote(form)" >Update</button>
            </div>
          </div>
        </div>
      </form>

      <form class="agencyForm" name="agencyForm" novalidate>
        <div class="panel panel-default">
          <div class="panel-heading">
            <h3 class="panel-title">Agency Information</h3>
          </div>
          <div class="panel-body">
            <div class="row">                              
                <div class="col-sm-3 form-group">
                  <label>Report No.</label>
                  <input type="text" class="form-control" name="reportNo" placeholder="*Report No." disabled required/>
                </div>
                <div class="col-sm-3 form-group">
                  <label>Report Date</label>
                   <div class="input-group">
                     <input class="form-control" name="reportDate" id="reportdate" datetime-picker readonly date-format="MM/dd/yyyy"  date-only placeholder="Report Date*" disabled/>
                     <label for="reportdate" class="input-group-addon"><i class="fa fa-calendar"></i></label>
                   </div>
                </div>
                <div class="col-sm-3 form-group">
                  <label>Year of Manufacture</label>
                  <input type="text" class="form-control" name="agencYom" placeholder="*Year of Manufacture" ng-disabled required/>
                </div>
                <div class="col-sm-3 form-group">
                  <label>Engine No.</label>
                  <input type="text" class="form-control" name="agencyEngineNo" ng-disabled" placeholder="Engine No."/>
                </div>
            </div>
            <div class="row">        
              <div class="col-sm-3 form-group">
                <label>Chassis No.</label>
                 <input type="text" class="form-control" name="agencyChassisNo" ng-disabled placeholder="Chassis No."/>
              </div>
              <div class="col-sm-3 form-group">
                <label>Registration No.</label>
                 <input type="text" class="form-control" name="agencyRegistrationNo" ng-disabled placeholder="Registration No."/>
              </div>
              <div class="col-sm-3 form-group">
                <label>Serial No.</label>
                 <input type="text" class="form-control" name="agencySerialNo" ng-disabled placeholder="Serial No." />
              </div>
              <div class="col-sm-3 form-group">
                <label>HMR / KMR</label>
                  <input type="text" class="form-control" name="hmr_kmr" placeholder="*HMR / KMR" ng-disabled required/>
                </div>
            </div>
            <div class="row ">                            
              <div class="col-sm-3 form-group">
                <label>Assessed Value</label>
                <input type="number" class="form-control" min="0" name="assessedValue" ng-disabled placeholder="*Assessed Value" required/>
              </div>
              <div class="col-sm-3 form-group">
                <label>Inspection By</label>
                 <input type="text" class="form-control" name="inspectionBy" ng-disabled placeholder="*Inspection By" required/>
              </div>
              <div class="col-sm-3 form-group">
                <label>Physical Condition</label>
                <input type="text" class="form-control" name="physicalCondition" ng-disabled placeholder="*Physical Condition" required/>            
              </div>
              <div class="col-sm-3 form-group">
                 GPS Installed
                  <div class="row">
                    <div class="col-xs-6">
                      <input type="radio" name="gps" ng-value="true"  ng-disabled> Yes
                    </div>
                    <div class="col-xs-6">
                      <input type="radio" name="gps" ng-value="false" ng-disabled> No
                    </div>
                  </div>
              </div>
            </div>

              <div class="row">        
                <div class="col-sm-3 form-group">
                  <label>GPS Device No.</label>
                 <input type="text" class="form-control" name="gpsDeviceNo" ng-disabled placeholder="GPS Device No." />
                </div>
                <div class="col-sm-3 form-group">
                  <label>IMIE No.</label>
                  <input type="text" class="form-control" name="gpsIMEINo" ng-disabled value="" placeholder="IMIE No." />
                </div>
                
              </div>
              <div class="row">
                <div class="col-sm-12 form-group">
                  <label>Overall General Condition</label>
                  <textarea name="" class="form-control" ng-disabled placeholder="Overall General Condition" rows="10" cols="100"></textarea>
                </div>
              </div>
              <h5 class="form-group"><strong>Upload Asset Images</strong></h5>
              <div class="row form-group">
                  <div class="col-sm-2  text-center">                
                     <div class="br5">
                        <span class="fileinput-button browse-icon">
                            <span><i class="fa fa-plus-circle"></i></span>
                              <input type="file" name="general" onchange="angular.element(this).scope().upload(this.files,'generalImage')" ng-disabled="!editAgencyField()" accept="image/*">
                         </span> 
                          <div ng-if="addTransactionVm.enterpriseValuation.generalImage.filename">
                            <div class="icn2">
                              <a href="javascript:void(0);" ng-click="addTransactionVm.deleteImg('generalImage')"><i class="fa fa-times"></i></a>
                           </div>
                            <span class="fileinput-button">
                              <a href="javascript:void(0);">
                                <img ng-src="{{addTransactionVm.enterpriseValuation.generalImage.filename}}" class="img-responsive" ng-if="addTransactionVm.enterpriseValuation.generalImage.external">
                                <img ng-src="{{uploadImagePrefix}}{{addTransactionVm.enterpriseValuation.assetDir}}/{{addTransactionVm.enterpriseValuation.generalImage.filename}}" class="img-responsive" ng-if="!addTransactionVm.enterpriseValuation.generalImage.external">
                              </a>
                            </span> 
                          </div>                      
                      </div>
                      <span>General</span>
                      <a href="javascript:void(0);" ng-if="addTransactionVm.enterpriseValuation.generalImage.filename" ng-click="downloadFile(addTransactionVm.enterpriseValuation.generalImage,addTransactionVm.enterpriseValuation.assetDir)">General</a>
                  </div>
                  <div class="col-sm-2  text-center">
                    <div class="br5">
                      <span class="fileinput-button browse-icon">
                          <span><i class="fa fa-plus-circle"></i></span>
                            <input type="file" name="engine" onchange="angular.element(this).scope().upload(this.files,'engineImage')" ng-disabled="!editAgencyField()" accept="image/*">
                       </span>
                       <div ng-if="addTransactionVm.enterpriseValuation.engineImage.filename">
                          <div class="icn2">
                            <a href="javascript:void(0);" ng-click="addTransactionVm.deleteImg('engineImage')"><i class="fa fa-times"></i></a>
                         </div>
                          <span class="fileinput-button">
                            <a href="javascript:void(0);">
                              <img ng-src="{{addTransactionVm.enterpriseValuation.engineImage.filename}}" class="img-responsive" ng-if="addTransactionVm.enterpriseValuation.engineImage.external">
                              <img ng-src="{{uploadImagePrefix}}{{addTransactionVm.enterpriseValuation.assetDir}}/{{addTransactionVm.enterpriseValuation.engineImage.filename}}" class="img-responsive" ng-if="!addTransactionVm.enterpriseValuation.engineImage.external">
                            </a>
                          </span> 
                        </div>                        
                    </div>  
                    <span>Engine</span>  
                    <a href="javascript:void(0);" ng-if="addTransactionVm.enterpriseValuation.engineImage.filename" ng-click="downloadFile(addTransactionVm.enterpriseValuation.engineImage,addTransactionVm.enterpriseValuation.assetDir)">Engine</a>
                  </div>
                  <div class="col-sm-2  text-center">
                    <div class="br5">
                      <span class="fileinput-button browse-icon">
                          <span><i class="fa fa-plus-circle"></i></span>
                            <input type="file" name="hydraulic" onchange="angular.element(this).scope().upload(this.files,'hydraulicImage')" ng-disabled="!editAgencyField()" accept="image/*">
                       </span> 
                       <div ng-if="addTransactionVm.enterpriseValuation.hydraulicImage.filename">
                          <div class="icn2">
                            <a href="javascript:void(0);" ng-click="addTransactionVm.deleteImg('hydraulicImage')"><i class="fa fa-times"></i></a>
                         </div>
                          <span class="fileinput-button">
                            <a href="javascript:void(0);">
                              <img ng-src="{{addTransactionVm.enterpriseValuation.hydraulicImage.filename}}" class="img-responsive" ng-if="addTransactionVm.enterpriseValuation.hydraulicImage.external">
                              <img ng-src="{{uploadImagePrefix}}{{addTransactionVm.enterpriseValuation.assetDir}}/{{addTransactionVm.enterpriseValuation.hydraulicImage.filename}}" class="img-responsive" ng-if="!addTransactionVm.enterpriseValuation.hydraulicImage.external">
                            </a>
                          </span> 
                        </div>                       
                    </div>
                    <span>Hydraulic</span>
                    <a href="javascript:void(0);" ng-if="addTransactionVm.enterpriseValuation.hydraulicImage.filename" ng-click="downloadFile(addTransactionVm.enterpriseValuation.hydraulicImage,addTransactionVm.enterpriseValuation.assetDir)">Hydraulic</a>
                  </div>
                  <div class="col-sm-2  text-center">
                    <div class="br5">
                      <span class="fileinput-button browse-icon">
                          <span><i class="fa fa-plus-circle"></i></span>
                            <input type="file" name="cabin" onchange="angular.element(this).scope().upload(this.files,'cabinImage')" ng-disabled="!editAgencyField()" accept="image/*">
                       </span> 
                       <div ng-if="addTransactionVm.enterpriseValuation.cabinImage.filename">
                          <div class="icn2">
                            <a href="javascript:void(0);" ng-click="addTransactionVm.deleteImg('cabinImage')"><i class="fa fa-times"></i></a>
                         </div>
                          <span class="fileinput-button">
                           <a href="javascript:void(0);">
                              <img ng-src="{{addTransactionVm.enterpriseValuation.cabinImage.filename}}" class="img-responsive" ng-if="addTransactionVm.enterpriseValuation.cabinImage.external">
                              <img ng-src="{{uploadImagePrefix}}{{addTransactionVm.enterpriseValuation.assetDir}}/{{addTransactionVm.enterpriseValuation.cabinImage.filename}}" class="img-responsive" ng-if="!addTransactionVm.enterpriseValuation.cabinImage.external">
                            </a>
                          </span> 
                        </div>                       
                    </div>
                    <span>Cabin</span>
                    <a href="javascript:void(0);" ng-if="addTransactionVm.enterpriseValuation.cabinImage.filename" ng-click="downloadFile(addTransactionVm.enterpriseValuation.cabinImage,addTransactionVm.enterpriseValuation.assetDir)">Cabin</a>
                  </div>
                  <div class="col-sm-2  text-center">
                    <div class="br5">
                      <span class="fileinput-button browse-icon" >
                          <span><i class="fa fa-plus-circle"></i></span>
                            <input type="file" name="undercarriage" onchange="angular.element(this).scope().upload(this.files,'underCarriageImage')" ng-disabled="!editAgencyField()" accept="image/*">
                       </span>    
                       <div ng-if="addTransactionVm.enterpriseValuation.underCarriageImage.filename">
                          <div class="icn2">
                            <a href="javascript:void(0);" ng-click="addTransactionVm.deleteImg('underCarriageImage')"><i class="fa fa-times"></i></a>
                         </div>
                          <span class="fileinput-button">
                            <a href="javascript:void(0);">
                              <img ng-src="{{addTransactionVm.enterpriseValuation.underCarriageImage.filename}}" class="img-responsive" ng-if="addTransactionVm.enterpriseValuation.underCarriageImage.external">
                              <img ng-src="{{uploadImagePrefix}}{{addTransactionVm.enterpriseValuation.assetDir}}/{{addTransactionVm.enterpriseValuation.underCarriageImage.filename}}" class="img-responsive" ng-if="!addTransactionVm.enterpriseValuation.underCarriageImage.external">
                            </a>
                          </span> 
                        </div>                    
                    </div> 
                    <span >Under-Carriage / Tyre </span>
                    <a href="javascript:void(0);" ng-if="addTransactionVm.enterpriseValuation.underCarriageImage.filename" ng-click="downloadFile(addTransactionVm.enterpriseValuation.underCarriageImage,addTransactionVm.enterpriseValuation.assetDir)">Under-Carriage / Tyre </a>
                  </div>
                  <div class="col-sm-2  text-center">
                    <div class="br5">
                      <span class="fileinput-button browse-icon">
                          <span><i class="fa fa-plus-circle"></i></span>
                            <input type="file" name="other" onchange="angular.element(this).scope().upload(this.files,'otherImage')" ng-disabled="!editAgencyField()" accept="image/*">
                       </span> 
                       <div ng-if="addTransactionVm.enterpriseValuation.otherImage.filename">
                          <div class="icn2">
                            <a href="javascript:void(0);" ng-click="addTransactionVm.deleteImg('otherImage')"><i class="fa fa-times"></i></a>
                         </div>
                          <span class="fileinput-button">
                            <a href="javascript:void(0);">
                              <img ng-src="{{addTransactionVm.enterpriseValuation.otherImage.filename}}" class="img-responsive" ng-if="addTransactionVm.enterpriseValuation.otherImage.external">
                              <img ng-src="{{uploadImagePrefix}}{{addTransactionVm.enterpriseValuation.assetDir}}/{{addTransactionVm.enterpriseValuation.otherImage.filename}}" class="img-responsive" ng-if="!addTransactionVm.enterpriseValuation.otherImage.external">
                            </a>
                          </span> 
                        </div>                       
                    </div> 
                    <span>Other</span>
                    <a href="javascript:void(0);" ng-if="addTransactionVm.enterpriseValuation.otherImage.filename" ng-click="downloadFile(addTransactionVm.enterpriseValuation.otherImage,addTransactionVm.enterpriseValuation.assetDir)">Other</a>
                  </div>              
              </div>
              <div class="row ">
                <div class="col-sm-2">Valuation Report</div>
                <div class="col-sm-2">
                  <span class="btn btn-warning fileinput-button">
                   <input type="file" name="report" onchange="angular.element(this).scope().upload(this.files,'valuationReport')" ng-disabled>
                    <span><i class="fa fa-upload"></i> Upload</span>
                  </span>
                </div>
                <div class="col-sm-4"><a href="javascript:void(0);">{{}}</a></div>
              </div>
          </div>
          <div class="panel-footer">
            <div class="row">
              <div class="col-sm-offset-6 col-sm-6 text-right">
                <!-- <button type="button" class="btn btn-default" ng-click="addTransactionVm.reset(enterpriseValForm)"  ng-disabled="!editEnterpriseField()">Reset</button> -->
                <button type="button" class="btn btn-danger">Update</button>
              </div>
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
