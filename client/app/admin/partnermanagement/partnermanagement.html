<div id="wrapper">
  <div id="page-wrapper">
    <div class="container-fluid">
      <div class="row">
        <div class="col-sm-12">
          <h3>
            Partner Registration
            <button class="btn btn-success btn-md pull-right" ng-click="isCollapsed = !isCollapsed"><i class="fa" ng-class="{'fa-minus': !isCollapsed, 'fa-plus': isCollapsed}"></i> Add New Partner</button>
          </h3>
          <hr>
        </div>
        <div class="col-sm-12">
          <!-- success error start-->
              <div class="row animate-show" ng-show="isSuccess" >
                <div class="col-sm-12">                
                  <div class="alert alert-success alert-dismissible fade in" role="alert">
                    <button type="button" class="close" ng-click="closeMeassage()" aria-label="Close"><span aria-hidden="true">×</span></button>
                     {{successMessage}}
                  </div>
                </div>
              </div>
              <div class="row animate-show" ng-show="isError">
                <div class="col-sm-12">                
                  <div class="alert alert-danger alert-dismissible fade in" role="alert">
                    <button type="button" class="close" ng-click="closeMeassage()" aria-label="Close"><span aria-hidden="true">×</span></button>
                      {{errorMessage}}
                  </div>
                </div>
              </div>
              <!-- success error end -->
          <div uib-collapse="isCollapsed">
          <form class="form" name="form" >
            <div class="form-group fill-info">
  	        <div class="row">
  	        	<div class="form-group">
  					<div class="form-group col-sm-3" ng-class="{'has-error': form.fname.$invalid && submitted }">
                      <input type="text" class="form-control" name="fname" ng-model="partnerVM.vendorReg.user.fname" value="" placeholder="*First Name" required/>
                    </div>
                    <div class="form-group col-sm-3">
                      <input type="text" class="form-control" name="mname" ng-model="partnerVM.vendorReg.user.mname" value="" placeholder="Middle Name"/>
                    </div>
                    <div class="form-group col-sm-3" ng-class="{'has-error': form.lname.$invalid && submitted }">
                      <input type="text" class="form-control" name="lname" ng-model="partnerVM.vendorReg.user.lname" value="" placeholder="*Last Name" required/>
                    </div>
                    <div class="col-sm-3" ng-class="{'has-error': form.entityName.$invalid && submitted }">
                      <input type="text" class="form-control" name="entityName" ng-model="partnerVM.vendorReg.entityName" value="" placeholder="*Legal Entity Name" required/>
                    </div>
  				</div>
  	        </div>
              <div class="row">
                  
                <div class="form-group col-sm-3" ng-class="{'has-error': form.email.$invalid && submitted }">
                  <input class="form-control" name="email" ng-model="partnerVM.vendorReg.user.email" placeholder="Email" type="email" value="" >
                  <p class="help-block" ng-show="(form.email.$error.email || form.email.$error.pattern) && submitted">
                  Please enter a valid email.
                </p>
                </div>
                <div class="form-group col-sm-3" ng-class="{'has-error': form.mobile.$invalid && submitted }">
                      <input class="form-control" name="mobile" ng-model="partnerVM.vendorReg.user.mobile" placeholder="* Mobile No." type="text" value="" ng-blur="partnerVM.verify()" uib-tooltip="98-XXXX-XXXX" tooltip-trigger="focus" pattern="^[7-9][0-9]{9}$" tooltip-placement="top" required>
                  </div>

                <div class="form-group col-sm-3">
                    <div class="form-group" ng-class="{'has-error': form.password && submitted }">
                        <input type="password" name="password" class="form-control" placeholder="* Password" ng-model="partnerVM.vendorReg.user.password" ng-minlength="4" ng-disabled="partnerVM.existFlag" >
                      </div>
                      <p class="help-block"
                       ng-show="(form.password.$error.minlength || form.password.$error.required) && submitted">
                      Password must be at least 4 characters.
                    </p>  
                </div>
                <!-- <div class="form-group col-sm-3">
  	                <input type="url" name="url" class="form-control" ng-model="partnerVM.vendorReg.url" placeholder="Your URL" />
  	                  
                </div>
                 --><div class="form-group col-sm-3">
                  <input type="text" class="form-control" name="phone" ng-model="partnerVM.vendorReg.user.phone" value="" placeholder="Phone No.">
                </div>
              </div>
  				        <div class="row">
                    
                    <!-- <div class="form-group col-sm-3" ng-class="{'has-error': form.mobile.$invalid && submitted }">
                      <input class="form-control" name="mobile" ng-model="partnerVM.vendorReg.mobile" placeholder="* Mobile No." type="text" value="" ng-blur="partnerVM.verify()" uib-tooltip="98-XXXX-XXXX" tooltip-trigger="focus" pattern="^[7-9][0-9]{9}$" tooltip-placement="top" required>
  	              </div> -->
              
                  <!-- <div class="col-xs-4">
                        <div class="form-group" ng-class="{'has-error': form.country.$invalid && submitted }">
                            <select class="form-control" name="country" ng-model="partnerVM.vendorReg.country" required>
                              <option value="" disabled>*Select Country</option>
                              <option  ng-repeat="country in allCountries" value="{{country.name}}">{{country.name}}</option>                          
                            </select>
                            <i class="caret"></i>
                    </div>
                  </div> -->
                  <div class="col-xs-3">
                        <div class="form-group" ng-class="{'has-error': form.location.$invalid && submitted }">
                            <select class="form-control" name="location" ng-model="partnerVM.vendorReg.user.city" ng-change="partnerVM.onLocationChange(partnerVM.vendorReg.user.city)" required>
                              <option value="" disabled>*Current Location</option>
                              <option ng-repeat="location in locationList" value="{{location.name}}">{{location.name}}</option>
                            </select>
                            <i class="caret"></i>
                    </div>
                  </div>
                  <div class="form-group col-sm-3">
                    <input type="url" name="url" class="form-control" ng-model="partnerVM.vendorReg.url" placeholder="Your URL" />
                      
                  </div>
                  <div class="col-sm-3 form-group">
                    <span class="btn btn-warning fileinput-button">
                      <span>Browse Partner Logo...</span>
                      <!-- <input type="file" image-upload="" data-filetype="image" data-index="0" name="files_0" class="ng-scope"> -->
                      <input type="file" name="file" onchange="angular.element(this).scope().updateAvatar(this.files,this)"  class="ng-scope">
                    </span>                    
                  </div>
                  <div class="col-sm-3">
                    {{partnerVM.vendorReg.user.imgsrc}}
                  </div>
                
                </div>
                <div class="row">
                  
                  <div class="col-sm-10 form-group">
                    <div class="row">
                      <div class="col-sm-2">
                        <input type="checkbox" name="Shipping" ng-model="Shipping" ng-true-value="'Shipping'"> Shipping
                      </div>
                      <div class="col-sm-2">
                        <input type="checkbox" name="Valuation" ng-model="Valuation" ng-true-value="'Valuation'"> Valuation
                      </div>
                      <div class="col-sm-2">
                        <input type="checkbox"  name="CertifiedByIQuippo" ng-model="CertifiedByIQuippo" ng-true-value="'CertifiedByIQuippo'" ng-cha> Certified by iQuippo
                      </div>
                      <div class="col-sm-2">
                        <input type="checkbox"  name="ManPower" ng-model="ManPower" ng-true-value="'ManPower'" ng-cha> Manpower
                      </div>
                      <div class="col-sm-2">
                        <input type="checkbox"  name="Finance" ng-model="Finance" ng-true-value="'Finance'" ng-cha> Finance
                      </div>
                      <div class="col-sm-2">
                        <input type="checkbox"  name="Auction" ng-model="Auction" ng-true-value="'Auction'" ng-cha> Auction
                      </div>
                    </div>
                  </div>
                  <div class="col-sm-2 form-group">
                  <button class="btn" type="button" ng-click="partnerVM.resetClick(form)" >Reset</button>
                  <input class="btn btn-danger btn-md" name="" type="button" ng-click="partnerVM.register(form)" value="Register"></div>
                </div>
              </div>
              
            </form>
          </div>

          <div class="table-responsive">
            <table datatable="ng" dt-options="dtOptions" class="table table-bordred table-striped">

              <thead>
                <tr>
                  <th>Image</th>
                  <th>Name</th>
                  <th>Legal Entity</th>
                  <th>Services</th>
                  <th>Email Id</th>
                  <th>Mobile No.</th>  
                  <th>Status</th>              
                  <th>Action</th>
                </tr>
               
              </thead>
              <tbody>
               <tr ng-repeat="vendor in vendorList">
                <td><img class="sheduleImg img-circle" ng-src="{{uploadImagePrefix}}{{avatarDir}}/{{vendor.user.imgsrc}}" alt="Image"></td>
                <td>{{vendor.user.fname}}</td>
                <td>{{vendor.entityName}}</td>
                <td>{{partnerVM.getServiceString(vendor.services.join())}}</td>
                <td>{{vendor.user.email}}</td>
                <td>{{vendor.user.mobile}}</td>
                <td> 
                  <span ng-if="vendor.status">Active</span><span ng-if="!vendor.status">Inactive</span>
                </td>
                <td>
                <label ng-show="getCurrentUser().role == 'admin'" class="btn btn-warning active-btn" ng-model="vendor.status" uib-btn-checkbox ng-click="partnerVM.updateVendorUser(vendor)"><span ng-if="!vendor.status">Activate</span> <span ng-if="vendor.status">Deactivate</span></label>
                <a class="btn btn-primary btn-sm" href="javascript:void(0);" ng-click="partnerVM.editVendorClick(vendor)" ><i class="fa fa-pencil"></i> </a>
                <!-- <button class="btn btn-sm btn-danger" ng-click="partnerVM.deleteVendor(vendor)"><i class="fa fa-trash"></i></button> --></td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>   
    </div>
  </div>
</div>